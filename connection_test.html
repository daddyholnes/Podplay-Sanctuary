<!DOCTYPE html>
<html>
<head>
    <title>Podplay Connection Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1e1e2e;
            color: #cdd6f4;
        }
        .card {
            background-color: #302d41;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #c9a2ff;
        }
        button {
            background-color: #c9a2ff;
            color: #1e1e2e;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        button:hover {
            background-color: #d4b8ff;
        }
        pre {
            background-color: #1e1e2e;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .success {
            color: #a6e3a1;
        }
        .error {
            color: #f38ba8;
        }
        .loading {
            color: #f9e2af;
        }
    </style>
</head>
<body>
    <h1>Podplay Sanctuary Connection Test</h1>
    
    <div class="card">
        <h2>Backend Connection Test</h2>
        <button id="testBackend">Test Backend Connection</button>
        <div id="backendResult">Click the button to test connection</div>
    </div>
    
    <div class="card">
        <h2>Frontend Connection Test</h2>
        <button id="testFrontend">Test Frontend Connection</button>
        <div id="frontendResult">Click the button to test connection</div>
    </div>
    
    <div class="card">
        <h2>Integration Workbench API Test</h2>
        <button id="testIntegration">Test Integration API</button>
        <div id="integrationResult">Click the button to test connection</div>
    </div>

    <script>
        document.getElementById('testBackend').addEventListener('click', async () => {
            const resultDiv = document.getElementById('backendResult');
            resultDiv.innerHTML = '<p class="loading">Testing backend connection...</p>';
            try {
                const response = await fetch('http://localhost:5000/health');
                if (response.ok) {
                    const data = await response.json();
                    resultDiv.innerHTML = `<p class="success">✅ Backend connection successful!</p>
                    <pre>${JSON.stringify(data, null, 2)}</pre>`;
                } else {
                    resultDiv.innerHTML = `<p class="error">❌ Backend responded with status: ${response.status}</p>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<p class="error">❌ Failed to connect to backend: ${error.message}</p>
                <p>Make sure the backend is running on http://localhost:5000</p>`;
            }
        });

        document.getElementById('testFrontend').addEventListener('click', async () => {
            const resultDiv = document.getElementById('frontendResult');
            resultDiv.innerHTML = '<p class="loading">Testing frontend connection...</p>';
            try {
                const response = await fetch('http://localhost:5174/', { mode: 'no-cors' });
                // With no-cors we can't actually read the response, but if it doesn't throw an error, it's likely working
                resultDiv.innerHTML = `<p class="success">✅ Frontend appears to be running!</p>
                <p>Visit <a href="http://localhost:5174/" target="_blank" style="color: #c9a2ff;">http://localhost:5174/</a> directly in your browser.</p>`;
            } catch (error) {
                resultDiv.innerHTML = `<p class="error">❌ Failed to connect to frontend: ${error.message}</p>
                <p>Make sure the frontend is running on http://localhost:5174</p>`;
            }
        });

        document.getElementById('testIntegration').addEventListener('click', async () => {
            const resultDiv = document.getElementById('integrationResult');
            resultDiv.innerHTML = '<p class="loading">Testing Integration API...</p>';
            try {
                const response = await fetch('http://localhost:5000/api/integration/platforms');
                if (response.ok) {
                    const data = await response.json();
                    resultDiv.innerHTML = `<p class="success">✅ Integration API connection successful!</p>
                    <pre>${JSON.stringify(data, null, 2)}</pre>`;
                } else {
                    resultDiv.innerHTML = `<p class="error">❌ Integration API responded with status: ${response.status}</p>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<p class="error">❌ Failed to connect to Integration API: ${error.message}</p>
                <p>Make sure the backend is running and CORS is properly configured</p>`;
            }
        });
    </script>
</body>
</html>
